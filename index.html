<!DOCTYPE html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
    <!-- External CSS -->
    <link rel="stylesheet" href="assets/css/styles.css">
    
    <!-- A-Frame and AR.js libraries -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <!-- Custom components and app scripts -->
    <script src="js/components/ar-components.js"></script>
  </head>
  <body>
    <!-- Loading screen -->
    <div class="arjs-loader">
      <div>Loading, please wait...</div>
    </div>
    
    <!-- Toggle button for texture controls -->
    <button id="toggle-controls-btn">Toggle Controls</button>
    
    <!-- Controls for selecting textures -->
    <div id="texture-controls">
      <h3 style="margin-top: 0;">Texture Controls</h3>
      
      <div class="control-group">
        <label for="bark-texture-select">Bark Texture:</label>
        <select id="bark-texture-select">
          <option value="#bark-texture-1">Bark Texture 1</option>
          <option value="#bark-texture-2">Bark Texture 2</option>
        </select>
      </div>
      
      <div class="control-group">
        <label for="leaves-texture-select">Leaves Texture:</label>
        <select id="leaves-texture-select">
          <option value="#leaf-texture-1">Leaves Texture 1</option>
          <option value="#leaf-texture-2">Leaves Texture 2</option>
          <option value="#leaf-texture-3" selected>Leaves Texture 3</option>
        </select>
      </div>
      
      <div class="control-group">
        <label for="tree-size-slider">Tree Size: <span id="size-value">0.05</span></label>
        <input type="range" id="tree-size-slider" min="0.01" max="0.5" step="0.01" value="0.05">
      </div>

      <div class="control-group">
        <label for="tree-x-slider">Position X: <span id="x-value">0</span></label>
        <input type="range" id="tree-x-slider" min="-2" max="2" step="0.1" value="0">
      </div>

      <div class="control-group">
        <label for="tree-y-slider">Position Y: <span id="y-value">0</span></label>
        <input type="range" id="tree-y-slider" min="-2" max="2" step="0.1" value="0">
      </div>

      <div class="control-group">
        <label for="tree-z-slider">Position Z: <span id="z-value">0</span></label>
        <input type="range" id="tree-z-slider" min="-2" max="2" step="0.1" value="0">
      </div>
    </div>

    <a-scene
      embedded
      vr-mode-ui="enabled: false"
      arjs="sourceType: webcam; 
            debugUIEnabled: true; 
            trackingMethod: best;
            detectionMode: mono;
            patternRatio: 0.5;
            facingMode: environment"
    >
      <a-assets>
        <a-asset-item id="tree-obj" src="assets/models/trees/Tree1.obj"></a-asset-item>
        <a-asset-item id="tree-mtl" src="assets/models/trees/Tree1.mtl"></a-asset-item>
        <!-- Tree texture images with updated paths -->
        <img id="bark-texture-1" src="assets/textures/natural/bark/BarkDeciduous0143_5.jpg" />
        <img id="bark-texture-2" src="assets/textures/natural/bark/BarkDeciduous0194_7.jpg" />
        <img id="leaf-texture-1" src="assets/textures/natural/leaves/Leaves0120_35.png" />
        <img id="leaf-texture-2" src="assets/textures/natural/leaves/Leaves0142_4.png" />
        <img id="leaf-texture-3" src="assets/textures/natural/leaves/Leaves0156_1.png" />
      </a-assets>

      <!-- Using standard Hiro marker -->
      <a-marker preset="hiro">
        <!-- 3D model with texture -->
        <a-entity
          obj-model="obj: #tree-obj; mtl: #tree-mtl"
          material-override="barkTexture: #bark-texture-1; leavesTexture: #leaf-texture-3"
          position="0 1.5 0"
          rotation="0 90 0"
          scale="0.5 0.5 0.5"
          visible="true"
        >
        </a-entity>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <!-- Custom app script -->
    <script src="js/app.js"></script>
  </body>
</html>
